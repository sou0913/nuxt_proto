(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{227:function(t,e,r){"use strict";r.r(e);r(46);var n=r(14),o={data:function(){return{email:"",emailState:null,password:"",passwordState:null}},methods:{checkFormValidity:function(){var t=this.$refs.form.checkValidity();return this.emailState=t,t},resetModal:function(){this.email="",this.emailState=null},handleOk:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t=this;this.checkFormValidity()&&(this.signIn(),this.$nextTick((function(){t.$bvModal.hide("modal-prevent-closing")})))},signIn:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$fireAuth.signInWithEmailAndPassword(t.email,t.password).catch((function(t){alert(t)}));case 1:case"end":return e.stop()}}),e)})))()}}},l=r(34),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-modal",{ref:"modal",attrs:{id:"modal-prevent-closing",title:"認証します"},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleOk}},[r("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[r("b-form-group",{attrs:{state:t.emailState,label:"メールアドレス","label-for":"email-input","invalid-feedback":"メールアドレスを入力お願いします"}},[r("b-form-input",{attrs:{id:"email-input",state:t.emailState,required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),t._v(" "),r("b-form-group",{attrs:{state:t.passwordState,label:"パスワード","label-for":"password-input","invalid-feedback":"パスワードを入力お願いします"}},[r("b-form-input",{attrs:{id:"password-input",state:t.passwordState,required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1)])}),[],!1,null,null,null);e.default=component.exports},231:function(t,e,r){"use strict";r.r(e);r(46);var n=r(14),o={data:function(){return{currentPage:1,rows:0,problems:[],fields:["id","title",{key:"buttons",label:""}],admin:!1}},asyncData:function(t){return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.$axios,e.next=3,r.$get("/problems?page=1");case 3:return n=e.sent,e.abrupt("return",{problems:n.problems,rows:n.total_rows});case 5:case"end":return e.stop()}}),e)})))()},created:function(){var t=this;this.$fireAuth.onAuthStateChanged((function(e){t.admin=!!e}))},computed:{loading:function(){return 0==this.problems.length}},methods:{fetchProblems:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$axios.$get("/problems?page=".concat(t));case 2:n=r.sent,e.problems=n.problems,e.rows=n.total_rows;case 5:case"end":return r.stop()}}),r)})))()},destroyProblem:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.$axios.$delete("/problems/".concat(t));case 3:alert("削除しました"),e.fetchProblems(e.currentPage),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),alert(r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()}}},l=r(34),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-pagination",{attrs:{"total-rows":t.rows},on:{input:t.fetchProblems},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}),t._v(" "),r("b-button",{attrs:{variant:"success",to:"/problemForm/new"}},[t._v("新規追加")]),t._v(" "),r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-prevent-closing",modifiers:{"modal-prevent-closing":!0}}],staticClass:"float-right",attrs:{variant:"primary"}},[t._v("管理モード")]),t._v(" "),t.loading?r("b-spinner",{attrs:{variant:"primary",label:"Spinning"}}):r("b-table",{attrs:{striped:"",hover:"",items:t.problems,fields:t.fields},scopedSlots:t._u([{key:"cell(title)",fn:function(data){return[r("b-link",{attrs:{to:"/problem/"+data.item.id}},[t._v(t._s(data.value))])]}},t.admin?{key:"cell(buttons)",fn:function(data){return[r("b-button",{attrs:{size:"sm",variant:"primary",to:"/problemForm/edit/"+data.item.id}},[t._v("\n        編集\n      ")]),t._v(" "),r("b-button",{attrs:{size:"sm"},on:{click:function(e){return t.destroyProblem(data.item.id)}}},[t._v("\n        削除\n      ")])]}}:null],null,!0)}),t._v(" "),r("SignInModal")],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{SignInModal:r(227).default})}}]);